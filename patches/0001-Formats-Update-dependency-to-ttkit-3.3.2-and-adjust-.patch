From 1af1f9deff26b6f2fd7a7b1888b1545a2838f884 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michal=20=C4=8Ciha=C5=99?= <michal@cihar.com>
Date: Fri, 5 Feb 2021 09:31:31 +0100
Subject: [PATCH 1/1] Formats: Update dependency to ttkit 3.3.2 and adjust
 tests

---
 requirements.txt                      |   2 +-
 weblate/formats/tests/test_formats.py |   4 +-
 weblate/trans/tests/data/cs.tbx       | 120 +++++++++++++-------------
 3 files changed, 63 insertions(+), 63 deletions(-)

diff --git weblate/formats/tests/test_formats.py weblate/formats/tests/test_formats.py
index 9077221ccf..96d24a7944 100644
--- weblate/formats/tests/test_formats.py
+++ weblate/formats/tests/test_formats.py
@@ -241,7 +241,7 @@ class AutoFormatTest(FixtureTestCase, TempDirMixin):
         This can be implemented in subclasses to implement content aware comparing of
         translation files.
         """
-        self.assertEqual((testdata).strip(), (newdata).strip())
+        self.assertEqual(testdata.strip(), newdata.strip())
 
     def test_find(self):
         storage = self.parse_file(self.FILE)
@@ -489,7 +489,7 @@ class PhpFormatTest(AutoFormatTest):
     FIND_CONTEXT = "$LANG['foo']"
     FIND_MATCH = "bar"
     BASE = ""
-    NEW_UNIT_MATCH = b"\nkey = 'Source string';\n"
+    NEW_UNIT_MATCH = b"\n$key = 'Source string';\n"
     EXPECTED_FLAGS = ""
 
 
diff --git weblate/trans/tests/data/cs.tbx weblate/trans/tests/data/cs.tbx
index fc45a06b58..a678fd9db7 100644
--- weblate/trans/tests/data/cs.tbx
+++ weblate/trans/tests/data/cs.tbx
@@ -1,63 +1,63 @@
-<?xml version='1.0' encoding='UTF-8'?>
+<?xml version="1.0" encoding="utf-8"?>
 <!DOCTYPE martif PUBLIC "ISO 12200:1999A//DTD MARTIF core (DXFcdV04)//EN" "TBXcdv04.dtd">
 <martif type="TBX" xml:lang="en">
-  <martifHeader>
-    <fileDesc>
-      <sourceDesc>
-        <p>Translate Toolkit</p>
-      </sourceDesc>
-    </fileDesc>
-  </martifHeader>
-  <text>
-    <body>
-      <termEntry>
-        <langSet xml:lang="en">
-          <tig>
-            <term>address bar</term>
-          </tig>
-        </langSet>
-        <langSet xml:lang="cs">
-          <tig>
-            <term>adresní řádek</term>
-          </tig>
-        </langSet>
-      </termEntry>
-      <termEntry>
-        <langSet xml:lang="en">
-          <tig>
-            <term>administrator</term>
-          </tig>
-        </langSet>
-        <langSet xml:lang="cs">
-          <tig>
-            <term>správce</term>
-          </tig>
-        </langSet>
-      </termEntry>
-      <termEntry>
-        <langSet xml:lang="en">
-          <tig>
-            <term>administrate</term>
-          </tig>
-        </langSet>
-        <langSet xml:lang="cs">
-          <tig>
-            <term>spravovat</term>
-          </tig>
-        </langSet>
-      </termEntry>
-      <termEntry>
-        <langSet xml:lang="en">
-          <tig>
-            <term>always on top</term>
-          </tig>
-        </langSet>
-        <langSet xml:lang="cs">
-          <tig>
-            <term>vždy navrchu</term>
-          </tig>
-        </langSet>
-      </termEntry>
-    </body>
-  </text>
+    <martifHeader>
+        <fileDesc>
+            <sourceDesc>
+                <p>Translate Toolkit</p>
+            </sourceDesc>
+        </fileDesc>
+    </martifHeader>
+    <text>
+        <body>
+            <termEntry>
+                <langSet xml:lang="en">
+                  <tig>
+                    <term>address bar</term>
+                  </tig>
+                </langSet>
+                <langSet xml:lang="cs">
+                  <tig>
+                    <term>adresní řádek</term>
+                  </tig>
+                </langSet>
+            </termEntry>
+            <termEntry>
+                <langSet xml:lang="en">
+                  <tig>
+                    <term>administrator</term>
+                  </tig>
+                </langSet>
+                <langSet xml:lang="cs">
+                  <tig>
+                    <term>správce</term>
+                  </tig>
+                </langSet>
+            </termEntry>
+            <termEntry>
+                <langSet xml:lang="en">
+                  <tig>
+                    <term>administrate</term>
+                  </tig>
+                </langSet>
+                <langSet xml:lang="cs">
+                  <tig>
+                    <term>spravovat</term>
+                  </tig>
+                </langSet>
+            </termEntry>
+            <termEntry>
+                <langSet xml:lang="en">
+                  <tig>
+                    <term>always on top</term>
+                  </tig>
+                </langSet>
+                <langSet xml:lang="cs">
+                  <tig>
+                    <term>vždy navrchu</term>
+                  </tig>
+                </langSet>
+            </termEntry>
+        </body>
+    </text>
 </martif>
-- 
2.30.0

